<!DOCTYPE html>

<html>
<head>
    <title>SchoolSmart</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Complex icons</title>
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        height: 100%;
      }
    </style>

</head>
<body>
    <script> 
    var SCHOOLS = {{ map_info|safe }}
    </script>

    <script style = 'height:300px' type = 'text/javascript'>

      // The following example creates complex markers to indicate beaches near
      // Sydney, NSW, Australia. Note that the anchor is set to (0,32) to correspond
      // to the base of the flagpole.

      //var schools = {{ map_info }}

      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 10,
          center: {lat: 41.82, lng: -87.602}
        });

        var schools = SCHOOLS;

        setMarkers(map, schools);
      }

      //var schools = [
        //['Bondi Beach', -33.890542, 151.274856, 4],
        //['Coogee Beach', -33.923036, 151.259052, 5],
        //['Cronulla Beach', -34.028249, 151.157507, 3],
        //['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
        //['Maroubra Beach', -33.950198, 151.259302, 1]
      //];

      function setMarkers(map, schools) {
        for (var i = 0; i < schools.length; i++) {
          var school = schools[i];
          var marker = new google.maps.Marker({
            position: {lat: school[1], lng: school[2]},
            map: map,
            title: school[0],
            zIndex: school[3]
          });
        }
      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCHtXoboDd-gh-swjytgWi_JkO1ObYJJYM&callback=initMap">
    </script>

    <h1><center>SchoolSmart</center></h1>

    <p><center>Here is a list of the top 12 schools that we recommend you consider based on your preferences, location, and data on the school's performance in recent years. To learn more about how we tabulated this list, click <a href="{% url 'about' %}">here</a>.
    </center></p>

    <table bgcolor = "#CEE3F6" border = "1">
    <tr>
    <th>Name</th>
    <th>Type</th>
    <th>Estimated Public Transit Travel Time (minutes)</th>
    <th> Portion of Transit Travel Time Walking </th>
    <th>Mean ACT Score</th>
    <th>College Enrollement Rate</th>
    <th>College Persistence Rate</th>
    <th>CPS Rating</th>
    </tr>

    {% for name in names %}
      <tr> <td><a href = {{ name.0 }}> {{ name.1 }} </a> </td> <td> {{ name.2 }} </td> <td> {{ name.3 }} </td><td> {{ name.9 }} </td><td> {{ name.4}} </td><td> {{ name.5 }} </td><td> {{ name.6 }} </td><td> {{ name.7 }} </td> </tr> 
    {% endfor %}

    <div style="height:500px;" id="map"></div>

    </table>

</body>
</html>

